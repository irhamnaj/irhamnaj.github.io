---
published: false
title: Customer Segmentation and Market Basket Analysis on Online Retail
collection: ml
layout: single
author_profile: false
read_time: true
categories: [project]
header :
    teaser : "https://irhamnaj.github.io/assets/images/customer-segmentation.png"
comments : true
toc: true
toc_sticky: true
sidebar:
    nav: sidebar-sample
---

A small startup can afford to target users based on some rules like demographics. But, for companies with sizes as same as Tokopedia and Bukalapak with million daily customers and transaction. they have got to graduate to a more sophisticated method to target their marketing.

One such approach is  Cluster Analysis, Use mathematical methods to discover groups of similar customers based on many criteria such as customer daily habit, demographic, economic condition, and other characteristics.

One major purpose of the above approach is to get the right cluster (group) of data that can be used by marketing team to maximize the company budget for marketing campaigns like discounts or product offers. In this Project, I will then use RFM Analysis and the k-means unsupervised Machine Learning algorithm to group these customers into clusters. 

# dataset Overview
The dataset includes one years of customer data (between december 2010 s/d december 2011), including their purchasing habits and demographic.

here, the information of each columns:
- InvoiceNo: Invoice number. A 6-digit integral number uniquely assigned to each transaction. If this code starts with the letter 'c', it indicates a cancellation.
- StockCode: Product (item) code. A 5-digit integral number uniquely assigned to each distinct product.
- Description: Product (item) name.
- Quantity: The quantities of each product (item) per transaction.
- InvoiceDate: Invice date and time.The day and time when a transaction was generated.
- UnitPrice: Unit price. Product price per unit in sterling (Â£).
- CustomerID: Customer number. A 5-digit integral number uniquely assigned to each customer.
- Country: Country name. The name of the country where a customer resides.

# Problem Statement
Online retail A has million customer transactions on their website that cust across demographics and has very different Purchasing habits. Our goal is to tackle this complexity and automatically segment customers into groups that respond best to a particular marketing campaign.

# Metrics
Unlike Supervised Machine learning, Unsupervised machine learning models don't have clearly metrics to find optimal parameters such as the number of clusters in k-means. But we can use Elbow and Silhouette methods to analyze number of clusters and find best number of clusters.

# Data Wrangling
## Import Library

```python
# library for data analysis
import pandas as pd
import numpy as np

# library for visualization
import matplotlib as mpl
import matplotlib.pyplot as plt
import matplotlib.cm as cm
from matplotlib import ticker
import seaborn as sns

# datetime manipulation
import datetime, nltk, warnings

#intertools
import itertools


#library statistics
from scipy import stats
from scipy.stats import norm
from scipy.stats import skew
from scipy.stats import kurtosis
from scipy.spatial.distance import cdist

#library for market basket analysis
from mlxtend.frequent_patterns import apriori as ap
from mlxtend.frequent_patterns import association_rules

# No warnings about setting value on copy of slice
pd.options.mode.chained_assignment = None


from pathlib import Path

#library for machine learing
from sklearn.preprocessing import PowerTransformer, StandardScaler
from sklearn.cluster import KMeans

#metrics
from sklearn.metrics import silhouette_samples, silhouette_score
```
## Read dataset
you can use pd.read_excel to read data with format xlsx, then use shape to know the dimension of the data

```python
#read_dataset
df = pd.read_excel('/content/drive/My Drive/Online Retail.xlsx', parse_dates=['InvoiceDate'])

#dataset overview
print('data has {} observations and {} features'.format(df.shape[0], df.shape[1]))
print("data overview")
df.head()
```

